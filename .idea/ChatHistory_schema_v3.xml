<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="ChatHistoryState">
    <option name="chatSessions" value="{&quot;38a3ebb5-2b8a-452a-915f-5dfbad633cde&quot;:{&quot;id&quot;:&quot;38a3ebb5-2b8a-452a-915f-5dfbad633cde&quot;,&quot;name&quot;:&quot;Greeting the Assistant&quot;,&quot;timestamp&quot;:1766467182541,&quot;messages&quot;:[{&quot;role&quot;:&quot;user&quot;,&quot;content&quot;:[{&quot;type&quot;:&quot;text&quot;,&quot;text&quot;:&quot;\n\u003cadditional_data\u003e\nBelow are some potentially helpful/relevant pieces of information for figuring out to respond\n\u003ccurrent_file\u003e\n```kotlin:app/src/main/java/com/example/hydrant/MainActivity.kt, lines\u003dALL(1-1755)\npackage com.example.hydrant\n\nimport android.annotation.SuppressLint\nimport android.os.Bundle\nimport androidx.activity.ComponentActivity\nimport androidx.activity.compose.setContent\nimport androidx.activity.enableEdgeToEdge\nimport androidx.activity.compose.rememberLauncherForActivityResult\nimport androidx.activity.result.contract.ActivityResultContracts\nimport androidx.core.view.WindowCompat\nimport androidx.compose.foundation.background\nimport androidx.compose.foundation.layout.*\nimport androidx.compose.foundation.lazy.LazyColumn\nimport androidx.compose.foundation.lazy.items\nimport androidx.compose.foundation.shape.CircleShape\nimport androidx.compose.foundation.shape.RoundedCornerShape\nimport androidx.compose.foundation.text.KeyboardOptions\nimport androidx.compose.ui.text.input.ImeAction\nimport androidx.compose.material.icons.Icons\nimport androidx.compose.material.icons.filled.AccountBox\nimport androidx.compose.material.icons.filled.ArrowBack\nimport androidx.compose.material.icons.filled.Favorite\nimport androidx.compose.material.icons.filled.Home\nimport androidx.compose.material.icons.filled.KeyboardArrowRight\nimport androidx.compose.material.icons.filled.LocationOn\nimport androidx.compose.material3.*\nimport androidx.compose.material3.adaptive.navigationsuite.NavigationSuiteScaffold\nimport androidx.compose.runtime.*\nimport androidx.compose.runtime.saveable.rememberSaveable\nimport androidx.compose.ui.Alignment\nimport androidx.compose.ui.Modifier\nimport androidx.compose.ui.draw.clip\nimport androidx.compose.ui.graphics.Color\nimport androidx.compose.ui.graphics.vector.ImageVector\nimport androidx.compose.ui.text.SpanStyle\nimport androidx.compose.ui.text.buildAnnotatedString\nimport androidx.compose.ui.text.font.FontWeight\nimport androidx.compose.ui.text.input.KeyboardType\nimport androidx.compose.ui.text.input.PasswordVisualTransformation\nimport androidx.compose.ui.text.input.VisualTransformation\nimport androidx.compose.ui.text.withStyle\nimport androidx.compose.ui.tooling.preview.Preview\nimport androidx.compose.ui.tooling.preview.PreviewScreenSizes\nimport androidx.compose.ui.unit.dp\nimport androidx.compose.ui.unit.sp\nimport com.example.hydrant.ui.theme.HYDRANTTheme\nimport com.google.android.gms.maps.model.CameraPosition\nimport com.google.android.gms.maps.model.LatLng\nimport com.google.maps.android.compose.GoogleMap\nimport com.google.maps.android.compose.MapProperties\nimport com.google.maps.android.compose.MapUiSettings\nimport com.google.maps.android.compose.rememberCameraPositionState\nimport androidx.lifecycle.viewmodel.compose.viewModel\nimport com.example.hydrant.viewmodel.AuthViewModel\nimport com.google.firebase.auth.FirebaseAuth\nimport com.google.firebase.auth.userProfileChangeRequest\nimport kotlinx.coroutines.launch\nimport com.google.android.gms.location.LocationServices\nimport com.google.android.gms.maps.CameraUpdateFactory\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.withContext\n\n// Weather Data Classes\ndata class WeatherResponse(\n    val main: Main,\n    val weather: List\u003cWeather\u003e,\n    val wind: Wind\n)\n\ndata class ForecastResponse(\n    val list: List\u003cForecastItem\u003e\n)\n\ndata class ForecastItem(\n    val main: Main,\n    val weather: List\u003cWeather\u003e,\n    val wind: Wind,\n    val dt_txt: String\n)\n\ndata class Main(\n    val temp: Double,\n    val humidity: Int,\n    val temp_min: Double,\n    val temp_max: Double\n)\n\ndata class Weather(\n    val main: String,\n    val description: String\n)\n\ndata class Wind(\n    val speed: Double\n)\n\ndata class DailyWeather(\n    val temp: Double,\n    val tempMin: Double,\n    val tempMax: Double,\n    val humidity: Int,\n    val windSpeed: Double,\n    val condition: String\n)\n\n// Weather API Functions\nsuspend fun fetchWeatherData(municipalityName: String): DailyWeather? {\n    val apiKey \u003d \&quot;4bc22a06c908152ed3f0a3a89613b138\&quot;\n    // Using 5-day forecast API to get daily min/max temperatures\n    val url \u003d \&quot;https://api.openweathermap.org/data/2.5/forecast?q\u003d$municipalityName,Laguna,PH\u0026units\u003dmetric\u0026appid\u003d$apiKey\&quot;\n\n    return withContext(Dispatchers.IO) {\n        try {\n            val connection \u003d java.net.URL(url).openConnection() as java.net.HttpURLConnection\n            connection.requestMethod \u003d \&quot;GET\&quot;\n            connection.connectTimeout \u003d 10000\n            connection.readTimeout \u003d 10000\n\n            val responseCode \u003d connection.responseCode\n            if (responseCode \u003d\u003d java.net.HttpURLConnection.HTTP_OK) {\n                val response \u003d connection.inputStream.bufferedReader().use { it.readText() }\n                parseForecastJson(response)\n            } else {\n                null\n            }\n        } catch (e: Exception) {\n            e.printStackTrace()\n            null\n        }\n    }\n}\n\nfun parseForecastJson(json: String): DailyWeather? {\n    return try {\n        // Get today\u0027s date to filter forecast items\n        val today \u003d java.text.SimpleDateFormat(\&quot;yyyy-MM-dd\&quot;, java.util.Locale.getDefault())\n            .format(java.util.Date())\n\n        // Extract all forecast items\n        val listPattern \u003d \&quot;\&quot;\&quot;\&quot;list\&quot;:\\[(.*?)\\]\&quot;\&quot;\&quot;.toRegex(RegexOption.DOT_MATCHES_ALL)\n        val listMatch \u003d listPattern.find(json) ?: return null\n        val listContent \u003d listMatch.groupValues[1]\n\n        // Split by objects (each forecast entry)\n        val entries \u003d listContent.split(\&quot;\\\&quot;dt_txt\\\&quot;\&quot;).drop(1)\n\n        var minTemp \u003d Double.MAX_VALUE\n        var maxTemp \u003d Double.MIN_VALUE\n        var currentTemp \u003d 0.0\n        var avgHumidity \u003d 0\n        var avgWindSpeed \u003d 0.0\n        var condition \u003d \&quot;Clear\&quot;\n        var count \u003d 0\n        var tempCount \u003d 0\n\n        for (entry in entries) {\n            // Check if this entry is for today or tomorrow (to get full range)\n            val dateRegex \u003d \&quot;\&quot;\&quot;:\\s*\&quot;([^\&quot;]+)\&quot;\&quot;\&quot;\&quot;.toRegex()\n            val dateMatch \u003d dateRegex.find(entry)\n            val entryDate \u003d dateMatch?.groupValues?.get(1) ?: continue\n\n            // Only process today\u0027s and tomorrow\u0027s first few forecasts\n            if (!entryDate.startsWith(today)) {\n                if (count \u003e 0) break // Stop after processing today\u0027s data\n                continue\n            }\n\n            // Extract all temperature values from this forecast entry\n            val tempRegex \u003d \&quot;\&quot;\&quot;\&quot;temp\&quot;:\\s*([\\d.]+)\&quot;\&quot;\&quot;.toRegex()\n            val tempMatches \u003d tempRegex.findAll(entry).toList()\n\n            for (tempMatch in tempMatches) {\n                val temp \u003d tempMatch.groupValues[1].toDoubleOrNull() ?: continue\n                minTemp \u003d minOf(minTemp, temp)\n                maxTemp \u003d maxOf(maxTemp, temp)\n                if (tempCount \u003d\u003d 0) currentTemp \u003d temp\n                tempCount++\n            }\n\n            // Extract temp_min\n            val tempMinRegex \u003d \&quot;\&quot;\&quot;\&quot;temp_min\&quot;:\\s*([\\d.]+)\&quot;\&quot;\&quot;.toRegex()\n            tempMinRegex.findAll(entry).forEach { match -\u003e\n                val tMin \u003d match.groupValues[1].toDoubleOrNull()\n                if (tMin !\u003d null) minTemp \u003d minOf(minTemp, tMin)\n            }\n\n            // Extract temp_max\n            val tempMaxRegex \u003d \&quot;\&quot;\&quot;\&quot;temp_max\&quot;:\\s*([\\d.]+)\&quot;\&quot;\&quot;.toRegex()\n            tempMaxRegex.findAll(entry).forEach { match -\u003e\n                val tMax \u003d match.groupValues[1].toDoubleOrNull()\n                if (tMax !\u003d null) maxTemp \u003d maxOf(maxTemp, tMax)\n            }\n\n            // Extract humidity (first occurrence in this entry)\n            val humidityRegex \u003d \&quot;\&quot;\&quot;\&quot;humidity\&quot;:\\s*(\\d+)\&quot;\&quot;\&quot;.toRegex()\n            val humidity \u003d humidityRegex.find(entry)?.groupValues?.get(1)?.toIntOrNull() ?: 0\n\n            // Extract wind speed (first occurrence in this entry)\n            val windRegex \u003d \&quot;\&quot;\&quot;\&quot;speed\&quot;:\\s*([\\d.]+)\&quot;\&quot;\&quot;.toRegex()\n            val windSpeed \u003d windRegex.find(entry)?.groupValues?.get(1)?.toDoubleOrNull() ?: 0.0\n\n            // Extract weather condition (only from first entry)\n            if (count \u003d\u003d 0) {\n                val weatherRegex \u003d \&quot;\&quot;\&quot;\&quot;main\&quot;:\\s*\&quot;([^\&quot;]+)\&quot;\&quot;\&quot;\&quot;.toRegex()\n                condition \u003d weatherRegex.find(entry)?.groupValues?.get(1) ?: \&quot;Clear\&quot;\n            }\n\n            avgHumidity +\u003d humidity\n            avgWindSpeed +\u003d windSpeed\n            count++\n        }\n\n        if (count \u003d\u003d 0 || minTemp \u003d\u003d Double.MAX_VALUE || maxTemp \u003d\u003d Double.MIN_VALUE) {\n            // Fallback: use first available forecast data\n            val tempRegex \u003d \&quot;\&quot;\&quot;\&quot;temp\&quot;:\\s*([\\d.]+)\&quot;\&quot;\&quot;.toRegex()\n            val temp \u003d tempRegex.find(json)?.groupValues?.get(1)?.toDoubleOrNull() ?: 28.0\n\n            val tempMinRegex \u003d \&quot;\&quot;\&quot;\&quot;temp_min\&quot;:\\s*([\\d.]+)\&quot;\&quot;\&quot;.toRegex()\n            minTemp \u003d tempMinRegex.find(json)?.groupValues?.get(1)?.toDoubleOrNull() ?: (temp - 3)\n\n            val tempMaxRegex \u003d \&quot;\&quot;\&quot;\&quot;temp_max\&quot;:\\s*([\\d.]+)\&quot;\&quot;\&quot;.toRegex()\n            maxTemp \u003d tempMaxRegex.find(json)?.groupValues?.get(1)?.toDoubleOrNull() ?: (temp + 3)\n\n            val humidityRegex \u003d \&quot;\&quot;\&quot;\&quot;humidity\&quot;:\\s*(\\d+)\&quot;\&quot;\&quot;.toRegex()\n            avgHumidity \u003d humidityRegex.find(json)?.groupValues?.get(1)?.toIntOrNull() ?: 70\n\n            val windRegex \u003d \&quot;\&quot;\&quot;\&quot;speed\&quot;:\\s*([\\d.]+)\&quot;\&quot;\&quot;.toRegex()\n            avgWindSpeed \u003d windRegex.find(json)?.groupValues?.get(1)?.toDoubleOrNull() ?: 3.0\n\n            val weatherRegex \u003d \&quot;\&quot;\&quot;\&quot;main\&quot;:\\s*\&quot;([^\&quot;]+)\&quot;\&quot;\&quot;\&quot;.toRegex()\n            condition \u003d weatherRegex.find(json)?.groupValues?.get(1) ?: \&quot;Clear\&quot;\n\n            currentTemp \u003d temp\n            count \u003d 1\n        } else {\n            avgHumidity /\u003d count\n            avgWindSpeed /\u003d count\n        }\n\n        DailyWeather(\n            temp \u003d if (currentTemp \u003e 0) currentTemp else (minTemp + maxTemp) / 2,\n            tempMin \u003d minTemp,\n            tempMax \u003d maxTemp,\n            humidity \u003d avgHumidity,\n            windSpeed \u003d avgWindSpeed,\n            condition \u003d condition\n        )\n    } catch (e: Exception) {\n        e.printStackTrace()\n        null\n    }\n}\n\n// Helper function to validate password\nfun validatePassword(password: String): String? {\n    return when {\n        password.length \u003c 12 -\u003e \&quot;Password must be at least 12 characters\&quot;\n        !password.any { it.isUpperCase() } -\u003e \&quot;Password must contain at least 1 uppercase letter\&quot;\n        !password.any { it.isDigit() } -\u003e \&quot;Password must contain at least 1 number\&quot;\n        !password.any { !it.isLetterOrDigit() } -\u003e \&quot;Password must contain at least 1 special character\&quot;\n        else -\u003e null\n    }\n}\n\nclass MainActivity : ComponentActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        enableEdgeToEdge()\n        WindowCompat.setDecorFitsSystemWindows(window, false)\n        setContent {\n            HYDRANTTheme {\n                HYDRANTApp()\n            }\n        }\n    }\n}\n\n@PreviewScreenSizes\n@Composable\nfun HYDRANTApp() {\n    val auth \u003d FirebaseAuth.getInstance()\n    var isLoggedIn by rememberSaveable { mutableStateOf(auth.currentUser !\u003d null) }\n    var showSignUp by rememberSaveable { mutableStateOf(false) }\n\n    val userName \u003d auth.currentUser?.displayName ?: \&quot;Full Name\&quot;\n\n    when {\n        isLoggedIn -\u003e MainApp(\n            userName \u003d userName,\n            onLogout \u003d {\n                isLoggedIn \u003d false\n            }\n        )\n        showSignUp -\u003e SignUpScreen(\n            onSignUpSuccess \u003d {\n                isLoggedIn \u003d true\n            },\n            onBackToLogin \u003d { showSignUp \u003d false }\n        )\n        else -\u003e LoginScreen(\n            onLoginSuccess \u003d {\n                isLoggedIn \u003d true\n            },\n            onNavigateToSignUp \u003d { showSignUp \u003d true }\n        )\n    }\n}\n\n@Composable\nfun LoginScreen(onLoginSuccess: () -\u003e Unit, onNavigateToSignUp: () -\u003e Unit) {\n    val viewModel: AuthViewModel \u003d viewModel()\n    val uiState by viewModel.uiState.collectAsState()\n\n    var email by rememberSaveable { mutableStateOf(\&quot;\&quot;) }\n    var password by rememberSaveable { mutableStateOf(\&quot;\&quot;) }\n    var passwordVisible by rememberSaveable { mutableStateOf(false) }\n    var showForgotPasswordDialog by rememberSaveable { mutableStateOf(false) }\n    var resetEmailSent by rememberSaveable { mutableStateOf(false) }\n\n    LaunchedEffect(uiState.isAuthenticated) {\n        if (uiState.isAuthenticated) {\n            onLoginSuccess()\n        }\n    }\n\n    val snackbarHostState \u003d remember { SnackbarHostState() }\n    LaunchedEffect(uiState.error) {\n        uiState.error?.let {\n            snackbarHostState.showSnackbar(it)\n            viewModel.clearError()\n        }\n    }\n\n    if (showForgotPasswordDialog) {\n        var resetEmail by remember { mutableStateOf(\&quot;\&quot;) }\n        var dialogError by remember { mutableStateOf(\&quot;\&quot;) }\n        var isLoading by remember { mutableStateOf(false) }\n\n        AlertDialog(\n            onDismissRequest \u003d {\n                if (!isLoading) {\n                    showForgotPasswordDialog \u003d false\n                    resetEmailSent \u003d false\n                    dialogError \u003d \&quot;\&quot;\n                }\n            },\n            title \u003d { Text(\&quot;Reset Password\&quot;) },\n            text \u003d {\n                Column {\n                    if (resetEmailSent) {\n                        Text(\&quot;Password reset link sent! Check your email.\&quot;)\n                    } else {\n                        Text(\&quot;Enter your email address and we\u0027ll send you a password reset link.\&quot;)\n                        Spacer(modifier \u003d Modifier.height(16.dp))\n                        OutlinedTextField(\n                            value \u003d resetEmail,\n                            onValueChange \u003d {\n                                resetEmail \u003d it\n                                dialogError \u003d \&quot;\&quot;\n                            },\n                            label \u003d { Text(\&quot;Email\&quot;) },\n                            singleLine \u003d true,\n                            modifier \u003d Modifier.fillMaxWidth(),\n                            keyboardOptions \u003d KeyboardOptions(keyboardType \u003d KeyboardType.Email),\n                            enabled \u003d !isLoading,\n                            isError \u003d dialogError.isNotEmpty()\n                        )\n                        if (dialogError.isNotEmpty()) {\n                            Spacer(modifier \u003d Modifier.height(4.dp))\n                            Text(\n                                text \u003d dialogError,\n                                color \u003d MaterialTheme.colorScheme.error,\n                                style \u003d MaterialTheme.typography.bodySmall\n                            )\n                        }\n                    }\n                }\n            },\n            confirmButton \u003d {\n                if (resetEmailSent) {\n                    TextButton(\n                        onClick \u003d {\n                            showForgotPasswordDialog \u003d false\n                            resetEmailSent \u003d false\n                        }\n                    ) {\n                        Text(\&quot;OK\&quot;)\n                    }\n                } else {\n                    TextButton(\n                        onClick \u003d {\n                            if (resetEmail.isNotBlank()) {\n                                isLoading \u003d true\n                                FirebaseAuth.getInstance().sendPasswordResetEmail(resetEmail)\n                                    .addOnSuccessListener {\n                                        isLoading \u003d false\n                                        resetEmailSent \u003d true\n                                    }\n                                    .addOnFailureListener { e -\u003e\n                                        isLoading \u003d false\n                                        dialogError \u003d when {\n                                            e.message?.contains(\&quot;user\&quot;) \u003d\u003d true -\u003e \&quot;No account found with this email\&quot;\n                                            e.message?.contains(\&quot;network\&quot;) \u003d\u003d true -\u003e \&quot;Network error. Check your connection\&quot;\n                                            else -\u003e \&quot;Failed to send reset email\&quot;\n                                        }\n                                    }\n                            } else {\n                                dialogError \u003d \&quot;Please enter your email\&quot;\n                            }\n                        },\n                        enabled \u003d !isLoading\n                    ) {\n                        if (isLoading) {\n                            CircularProgressIndicator(\n                                modifier \u003d Modifier.size(20.dp),\n                                strokeWidth \u003d 2.dp\n                            )\n                        } else {\n                            Text(\&quot;Send Reset Link\&quot;)\n                        }\n                    }\n                }\n            },\n            dismissButton \u003d {\n                if (!resetEmailSent) {\n                    TextButton(\n                        onClick \u003d {\n                            showForgotPasswordDialog \u003d false\n                            dialogError \u003d \&quot;\&quot;\n                        },\n                        enabled \u003d !isLoading\n                    ) {\n                        Text(\&quot;Cancel\&quot;)\n                    }\n                }\n            }\n        )\n    }\n\n    Surface(\n        modifier \u003d Modifier.fillMaxSize(),\n        color \u003d MaterialTheme.colorScheme.background\n    ) {\n        Scaffold(\n            snackbarHost \u003d { SnackbarHost(snackbarHostState) }\n        ) { padding -\u003e\n            Column(\n                modifier \u003d Modifier\n                    .fillMaxSize()\n                    .padding(24.dp)\n                    .padding(padding)\n                    .systemBarsPadding(),\n                horizontalAlignment \u003d Alignment.CenterHorizontally,\n                verticalArrangement \u003d Arrangement.Center\n            ) {\n                Text(\n                    text \u003d buildAnnotatedString {\n                        withStyle(style \u003d SpanStyle(color \u003d Color(0xFFFF6B35))) {\n                            append(\&quot;Fire\&quot;)\n                        }\n                        withStyle(style \u003d SpanStyle(color \u003d Color(0xFFFF4500))) {\n                            append(\&quot;Grid\&quot;)\n                        }\n                    },\n                    style \u003d MaterialTheme.typography.headlineLarge\n                )\n\n                Spacer(modifier \u003d Modifier.height(48.dp))\n\n                OutlinedTextField(\n                    value \u003d email,\n                    onValueChange \u003d { email \u003d it },\n                    label \u003d { Text(\&quot;Email\&quot;) },\n                    singleLine \u003d true,\n                    modifier \u003d Modifier.fillMaxWidth(),\n                    keyboardOptions \u003d KeyboardOptions(keyboardType \u003d KeyboardType.Email),\n                    enabled \u003d !uiState.isLoading\n                )\n\n                Spacer(modifier \u003d Modifier.height(16.dp))\n\n                OutlinedTextField(\n                    value \u003d password,\n                    onValueChange \u003d { password \u003d it },\n                    label \u003d { Text(\&quot;Password\&quot;) },\n                    singleLine \u003d true,\n                    visualTransformation \u003d if (passwordVisible) VisualTransformation.None else PasswordVisualTransformation(),\n                    keyboardOptions \u003d KeyboardOptions(keyboardType \u003d KeyboardType.Password),\n                    trailingIcon \u003d {\n                        IconButton(onClick \u003d { passwordVisible \u003d !passwordVisible }) {\n                            Text(\n                                text \u003d if (passwordVisible) \&quot;\&quot; else \&quot;‍️\&quot;,\n                                style \u003d MaterialTheme.typography.titleMedium\n                            )\n                        }\n                    },\n                    modifier \u003d Modifier.fillMaxWidth(),\n                    enabled \u003d !uiState.isLoading\n                )\n\n                Spacer(modifier \u003d Modifier.height(8.dp))\n\n                Row(\n                    modifier \u003d Modifier.fillMaxWidth(),\n                    horizontalArrangement \u003d Arrangement.End\n                ) {\n                    TextButton(onClick \u003d {\n                        showForgotPasswordDialog \u003d true\n                    }) {\n                        Text(\n                            \&quot;Forgot Password?\&quot;,\n                            color \u003d Color.Black\n                        )\n                    }\n                }\n\n                Spacer(modifier \u003d Modifier.height(16.dp))\n\n                Button(\n                    onClick \u003d {\n                        viewModel.signIn(email, password)\n                    },\n                    modifier \u003d Modifier\n                        .fillMaxWidth()\n                        .height(50.dp),\n                    enabled \u003d !uiState.isLoading \u0026\u0026 email.isNotBlank() \u0026\u0026 password.isNotBlank(),\n                    colors \u003d ButtonDefaults.buttonColors(\n                        containerColor \u003d Color(0xFFFF6B35)\n                    )\n                ) {\n                    if (uiState.isLoading) {\n                        CircularProgressIndicator(\n                            modifier \u003d Modifier.size(24.dp),\n                            color \u003d MaterialTheme.colorScheme.onPrimary\n                        )\n                    } else {\n                        Text(\&quot;Login\&quot;)\n                    }\n                }\n\n                Spacer(modifier \u003d Modifier.height(16.dp))\n\n                TextButton(onClick \u003d onNavigateToSignUp) {\n                    Text(\n                        \&quot;Don\u0027t have an account? Sign Up\&quot;,\n                        style \u003d MaterialTheme.typography.bodyMedium\n                    )\n                }\n            }\n        }\n    }\n}\n\n@Composable\nfun SignUpScreen(onSignUpSuccess: () -\u003e Unit, onBackToLogin: () -\u003e Unit) {\n    val viewModel: AuthViewModel \u003d viewModel()\n    val uiState by viewModel.uiState.collectAsState()\n\n    var name by rememberSaveable { mutableStateOf(\&quot;\&quot;) }\n    var email by rememberSaveable { mutableStateOf(\&quot;\&quot;) }\n    var password by rememberSaveable { mutableStateOf(\&quot;\&quot;) }\n    var confirmPassword by rememberSaveable { mutableStateOf(\&quot;\&quot;) }\n    var passwordVisible by rememberSaveable { mutableStateOf(false) }\n    var confirmPasswordVisible by rememberSaveable { mutableStateOf(false) }\n    var localError by rememberSaveable { mutableStateOf(\&quot;\&quot;) }\n\n    LaunchedEffect(uiState.isAuthenticated) {\n        if (uiState.isAuthenticated) {\n            val user \u003d FirebaseAuth.getInstance().currentUser\n            val profileUpdates \u003d userProfileChangeRequest {\n                displayName \u003d name\n            }\n            user?.updateProfile(profileUpdates)?.addOnCompleteListener {\n                onSignUpSuccess()\n            }\n        }\n    }\n\n    val snackbarHostState \u003d remember { SnackbarHostState() }\n    LaunchedEffect(uiState.error) {\n        uiState.error?.let {\n            snackbarHostState.showSnackbar(it)\n            viewModel.clearError()\n        }\n    }\n\n    Surface(\n        modifier \u003d Modifier.fillMaxSize(),\n        color \u003d MaterialTheme.colorScheme.background\n    ) {\n        Scaffold(\n            snackbarHost \u003d { SnackbarHost(snackbarHostState) }\n        ) { padding -\u003e\n            LazyColumn(\n                modifier \u003d Modifier\n                    .fillMaxSize()\n                    .padding(24.dp)\n                    .padding(padding)\n                    .systemBarsPadding(),\n                horizontalAlignment \u003d Alignment.CenterHorizontally\n            ) {\n                item { Spacer(modifier \u003d Modifier.height(32.dp)) }\n\n                item {\n                    Text(\n                        text \u003d buildAnnotatedString {\n                            withStyle(style \u003d SpanStyle(color \u003d Color(0xFFFF6B35))) {\n                                append(\&quot;Fire\&quot;)\n                            }\n                            withStyle(style \u003d SpanStyle(color \u003d Color(0xFFFF4500))) {\n                                append(\&quot;Grid\&quot;)\n                            }\n                        },\n                        style \u003d MaterialTheme.typography.headlineLarge\n                    )\n                }\n\n                item { Spacer(modifier \u003d Modifier.height(32.dp)) }\n\n                item {\n                    OutlinedTextField(\n                        value \u003d name,\n                        onValueChange \u003d {\n                            name \u003d it\n                            localError \u003d \&quot;\&quot;\n                        },\n                        label \u003d { Text(\&quot;Full Name\&quot;) },\n                        singleLine \u003d true,\n                        modifier \u003d Modifier.fillMaxWidth(),\n                        enabled \u003d !uiState.isLoading,\n                        colors \u003d OutlinedTextFieldDefaults.colors(\n                            focusedBorderColor \u003d Color(0xFFFF6B35),\n                            focusedLabelColor \u003d Color(0xFFFF6B35)\n                        ),\n                        keyboardOptions \u003d KeyboardOptions(\n                            imeAction \u003d ImeAction.Next,\n                            autoCorrect \u003d false\n                        )\n                    )\n                }\n\n                item { Spacer(modifier \u003d Modifier.height(16.dp)) }\n\n                item {\n                    OutlinedTextField(\n                        value \u003d email,\n                        onValueChange \u003d {\n                            email \u003d it\n                            localError \u003d \&quot;\&quot;\n                        },\n                        label \u003d { Text(\&quot;Email\&quot;) },\n                        singleLine \u003d true,\n                        modifier \u003d Modifier.fillMaxWidth(),\n                        keyboardOptions \u003d KeyboardOptions(keyboardType \u003d KeyboardType.Email),\n                        enabled \u003d !uiState.isLoading\n                    )\n                }\n\n                item { Spacer(modifier \u003d Modifier.height(16.dp)) }\n\n                item {\n                    OutlinedTextField(\n                        value \u003d password,\n                        onValueChange \u003d {\n                            password \u003d it\n                            localError \u003d \&quot;\&quot;\n                        },\n                        label \u003d { Text(\&quot;Password\&quot;) },\n                        singleLine \u003d true,\n                        visualTransformation \u003d if (passwordVisible) VisualTransformation.None else PasswordVisualTransformation(),\n                        keyboardOptions \u003d KeyboardOptions(keyboardType \u003d KeyboardType.Password),\n                        trailingIcon \u003d {\n                            IconButton(onClick \u003d { passwordVisible \u003d !passwordVisible }) {\n                                Text(\n                                    text \u003d if (passwordVisible) \&quot;\&quot; else \&quot;‍️\&quot;,\n                                    style \u003d MaterialTheme.typography.titleMedium\n                                )\n                            }\n                        },\n                        modifier \u003d Modifier.fillMaxWidth(),\n                        enabled \u003d !uiState.isLoading\n                    )\n                }\n\n                item { Spacer(modifier \u003d Modifier.height(8.dp)) }\n\n                item {\n                    Text(\n                        text \u003d \&quot;Password must have: 12 characters, 1 uppercase, 1 number, 1 special character\&quot;,\n                        style \u003d MaterialTheme.typography.bodySmall,\n                        color \u003d Color.Gray,\n                        modifier \u003d Modifier.fillMaxWidth()\n                    )\n                }\n\n                item { Spacer(modifier \u003d Modifier.height(16.dp)) }\n\n                item {\n                    OutlinedTextField(\n                        value \u003d confirmPassword,\n                        onValueChange \u003d {\n                            confirmPassword \u003d it\n                            localError \u003d \&quot;\&quot;\n                        },\n                        label \u003d { Text(\&quot;Confirm Password\&quot;) },\n                        singleLine \u003d true,\n                        visualTransformation \u003d if (confirmPasswordVisible) VisualTransformation.None else PasswordVisualTransformation(),\n                        keyboardOptions \u003d KeyboardOptions(keyboardType \u003d KeyboardType.Password),\n                        trailingIcon \u003d {\n                            IconButton(onClick \u003d { confirmPasswordVisible \u003d !confirmPasswordVisible }) {\n                                Text(\n                                    text \u003d if (confirmPasswordVisible) \&quot;\&quot; else \&quot;‍️\&quot;,\n                                    style \u003d MaterialTheme.typography.titleMedium\n                                )\n                            }\n                        },\n                        modifier \u003d Modifier.fillMaxWidth(),\n                        enabled \u003d !uiState.isLoading\n                    )\n                }\n\n                if (localError.isNotEmpty()) {\n                    item { Spacer(modifier \u003d Modifier.height(8.dp)) }\n                    item {\n                        Text(\n                            text \u003d localError,\n                            color \u003d MaterialTheme.colorScheme.error,\n                            style \u003d MaterialTheme.typography.bodySmall\n                        )\n                    }\n                }\n\n                item { Spacer(modifier \u003d Modifier.height(24.dp)) }\n\n                item {\n                    Button(\n                        onClick \u003d {\n                            when {\n                                name.isBlank() || email.isBlank() || password.isBlank() || confirmPassword.isBlank() -\u003e {\n                                    localError \u003d \&quot;Please fill in all fields\&quot;\n                                }\n                                password !\u003d confirmPassword -\u003e {\n                                    localError \u003d \&quot;Passwords do not match\&quot;\n                                }\n                                else -\u003e {\n                                    val passwordValidationError \u003d validatePassword(password)\n                                    if (passwordValidationError !\u003d null) {\n                                        localError \u003d passwordValidationError\n                                    } else {\n                                        localError \u003d \&quot;\&quot;\n                                        viewModel.signUp(email, password)\n                                    }\n                                }\n                            }\n                        },\n                        modifier \u003d Modifier\n                            .fillMaxWidth()\n                            .height(50.dp),\n                        enabled \u003d !uiState.isLoading,\n                        colors \u003d ButtonDefaults.buttonColors(\n                            containerColor \u003d Color(0xFFFF6B35)\n                        )\n                    ) {\n                        if (uiState.isLoading) {\n                            CircularProgressIndicator(\n                                modifier \u003d Modifier.size(24.dp),\n                                color \u003d MaterialTheme.colorScheme.onPrimary\n                            )\n                        } else {\n                            Text(\&quot;Sign Up\&quot;)\n                        }\n                    }\n                }\n\n                item { Spacer(modifier \u003d Modifier.height(16.dp)) }\n\n                item {\n                    TextButton(onClick \u003d onBackToLogin) {\n                        Text(\n                            \&quot;Already have an account? Login\&quot;,\n                            style \u003d MaterialTheme.typography.bodyMedium\n                        )\n                    }\n                }\n\n                item { Spacer(modifier \u003d Modifier.height(32.dp)) }\n            }\n        }\n    }\n}\n\n@Composable\nfun MainApp(userName: String, onLogout: () -\u003e Unit) {\n    var currentDestination by rememberSaveable { mutableStateOf(AppDestinations.HOME) }\n    var selectedMunicipality by rememberSaveable { mutableStateOf\u003cString?\u003e(null) }\n\n    val favoritesScrollState \u003d androidx.compose.foundation.lazy.rememberLazyListState()\n\n    if (selectedMunicipality !\u003d null) {\n        MunicipalityDetailScreen(\n            municipalityName \u003d selectedMunicipality!!,\n            onBack \u003d { selectedMunicipality \u003d null }\n        )\n    } else {\n        NavigationSuiteScaffold(\n            navigationSuiteItems \u003d {\n                AppDestinations.entries.forEach { destination -\u003e\n                    item(\n                        icon \u003d {\n                            Icon(\n                                destination.icon,\n                                contentDescription \u003d destination.label\n                            )\n                        },\n                        label \u003d { Text(destination.label) },\n                        selected \u003d destination \u003d\u003d currentDestination,\n                        onClick \u003d { currentDestination \u003d destination }\n                    )\n                }\n            }\n        ) {\n            Scaffold(modifier \u003d Modifier.fillMaxSize()) { innerPadding -\u003e\n                when (currentDestination) {\n                    AppDestinations.HOME -\u003e MapScreen(modifier \u003d Modifier.padding(innerPadding))\n                    AppDestinations.FAVORITES -\u003e FavoritesScreen(\n                        modifier \u003d Modifier.padding(innerPadding),\n                        scrollState \u003d favoritesScrollState,\n                        onMunicipalityClick \u003d { municipality -\u003e\n                            selectedMunicipality \u003d municipality\n                        }\n                    )\n                    AppDestinations.PROFILE -\u003e ProfileScreen(\n                        modifier \u003d Modifier.padding(innerPadding),\n                        userName \u003d userName,\n                        onLogout \u003d onLogout\n                    )\n                }\n            }\n        }\n    }\n}\n\n@OptIn(ExperimentalMaterial3Api::class)\n@Composable\nfun MunicipalityDetailScreen(\n    municipalityName: String,\n    onBack: () -\u003e Unit\n) {\n    var weatherData by remember { mutableStateOf\u003cDailyWeather?\u003e(null) }\n    var isLoading by remember { mutableStateOf(true) }\n    var errorMessage by remember { mutableStateOf\u003cString?\u003e(null) }\n    val scope \u003d rememberCoroutineScope()\n\n    var showAddHydrantDialog by remember { mutableStateOf(false) }\n    var hydrantAdded by remember { mutableStateOf(false) }\n\n    LaunchedEffect(municipalityName) {\n        isLoading \u003d true\n        errorMessage \u003d null\n        scope.launch {\n            val data \u003d fetchWeatherData(municipalityName)\n            if (data !\u003d null) {\n                weatherData \u003d data\n            } else {\n                errorMessage \u003d \&quot;Unable to fetch weather data\&quot;\n            }\n            isLoading \u003d false\n        }\n    }\n\n    val temperature \u003d weatherData?.temp?.toInt() ?: 65\n    val condition \u003d weatherData?.condition ?: \&quot;Loading...\&quot;\n    val tempMin \u003d weatherData?.tempMin?.toInt() ?: 63\n    val tempMax \u003d weatherData?.tempMax?.toInt() ?: 66\n    // Show daily low/high forecast temperatures\n    val lowHigh \u003d \&quot;$tempMin° / $tempMax°\&quot;\n    val humidity \u003d \&quot;${weatherData?.humidity ?: 0}%\&quot;\n    // Convert wind speed from m/s to km/h (multiply by 3.6)\n    val windSpeedKmh \u003d ((weatherData?.windSpeed ?: 0.0) * 3.6).toInt()\n    val windSpeed \u003d \&quot;$windSpeedKmh km/h\&quot;\n    val outOfService \u003d remember { 0 }\n    val inService \u003d remember { 0 }\n\n    if (showAddHydrantDialog) {\n        AddFireHydrantDialog(\n            onDismiss \u003d { showAddHydrantDialog \u003d false },\n            onConfirm \u003d {\n                hydrantAdded \u003d true\n                showAddHydrantDialog \u003d false\n            }\n        )\n    }\n\n    Scaffold(\n        topBar \u003d {\n            TopAppBar(\n                title \u003d { },\n                navigationIcon \u003d {\n                    IconButton(onClick \u003d onBack) {\n                        Icon(\n                            imageVector \u003d Icons.Default.ArrowBack,\n                            contentDescription \u003d \&quot;Back\&quot;,\n                            tint \u003d Color.White\n                        )\n                    }\n                },\n                colors \u003d TopAppBarDefaults.topAppBarColors(\n                    containerColor \u003d Color(0xFFFF6B35)\n                ),\n                modifier \u003d Modifier.systemBarsPadding()\n            )\n        }\n    ) { padding -\u003e\n        LazyColumn(\n            modifier \u003d Modifier\n                .fillMaxSize()\n                .background(Color(0xFFF5F5F5))\n                .padding(padding),\n            contentPadding \u003d PaddingValues(bottom \u003d 16.dp)\n        ) {\n            item {\n                Card(\n                    modifier \u003d Modifier\n                        .fillMaxWidth()\n                        .padding(16.dp),\n                    colors \u003d CardDefaults.cardColors(\n                        containerColor \u003d Color.White\n                    ),\n                    elevation \u003d CardDefaults.cardElevation(defaultElevation \u003d 2.dp)\n                ) {\n                    Column(\n                        modifier \u003d Modifier\n                            .fillMaxWidth()\n                            .padding(24.dp),\n                        horizontalAlignment \u003d Alignment.CenterHorizontally\n                    ) {\n                        Text(\n                            text \u003d \&quot;Weather for $municipalityName\&quot;,\n                            style \u003d MaterialTheme.typography.titleMedium,\n                            color \u003d Color(0xFF666666)\n                        )\n\n                        Spacer(modifier \u003d Modifier.height(8.dp))\n\n                        if (isLoading) {\n                            CircularProgressIndicator(\n                                modifier \u003d Modifier.size(48.dp),\n                                color \u003d Color(0xFFFF6B35)\n                            )\n                        } else if (errorMessage !\u003d null) {\n                            Text(\n                                text \u003d errorMessage ?: \&quot;Error\&quot;,\n                                style \u003d MaterialTheme.typography.bodyMedium,\n                                color \u003d MaterialTheme.colorScheme.error\n                            )\n                        } else {\n                            Text(\n                                text \u003d \&quot;$temperature°C\&quot;,\n                                style \u003d MaterialTheme.typography.displayLarge,\n                                fontSize \u003d 72.sp,\n                                fontWeight \u003d FontWeight.Light\n                            )\n\n                            Text(\n                                text \u003d condition,\n                                style \u003d MaterialTheme.typography.bodyLarge,\n                                color \u003d Color(0xFF666666)\n                            )\n\n                            Spacer(modifier \u003d Modifier.height(16.dp))\n\n                            Row(\n                                modifier \u003d Modifier.fillMaxWidth(),\n                                horizontalArrangement \u003d Arrangement.SpaceEvenly\n                            ) {\n                                WeatherDetail(\&quot;Low / High\&quot;, lowHigh)\n                                WeatherDetail(\&quot;Humidity\&quot;, humidity)\n                                WeatherDetail(\&quot;Wind\&quot;, windSpeed)\n                            }\n                        }\n                    }\n                }\n            }\n\n            item {\n                Row(\n                    modifier \u003d Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal \u003d 16.dp, vertical \u003d 8.dp),\n                    horizontalArrangement \u003d Arrangement.spacedBy(8.dp)\n                ) {\n                    Card(\n                        modifier \u003d Modifier.weight(1f),\n                        colors \u003d CardDefaults.cardColors(\n                            containerColor \u003d Color(0xFFFFCDD2)\n                        ),\n                        elevation \u003d CardDefaults.cardElevation(defaultElevation \u003d 2.dp)\n                    ) {\n                        Column(\n                            modifier \u003d Modifier\n                                .fillMaxWidth()\n                                .padding(16.dp),\n                            horizontalAlignment \u003d Alignment.CenterHorizontally\n                        ) {\n                            Text(\n                                text \u003d \&quot;$outOfService\&quot;,\n                                style \u003d MaterialTheme.typography.displayMedium,\n                                fontSize \u003d 48.sp,\n                                fontWeight \u003d FontWeight.Bold,\n                                color \u003d Color(0xFFD32F2F)\n                            )\n                            Text(\n                                text \u003d \&quot;Out Of Service\&quot;,\n                                style \u003d MaterialTheme.typography.bodyMedium,\n                                color \u003d Color(0xFFD32F2F)\n                            )\n                        }\n                    }\n\n                    Card(\n                        modifier \u003d Modifier.weight(1f),\n                        colors \u003d CardDefaults.cardColors(\n                            containerColor \u003d Color(0xFFC8E6C9)\n                        ),\n                        elevation \u003d CardDefaults.cardElevation(defaultElevation \u003d 2.dp)\n                    ) {\n                        Column(\n                            modifier \u003d Modifier\n                                .fillMaxWidth()\n                                .padding(16.dp),\n                            horizontalAlignment \u003d Alignment.CenterHorizontally\n                        ) {\n                            Text(\n                                text \u003d \&quot;$inService\&quot;,\n                                style \u003d MaterialTheme.typography.displayMedium,\n                                fontSize \u003d 48.sp,\n                                fontWeight \u003d FontWeight.Bold,\n                                color \u003d Color(0xFF388E3C)\n                            )\n                            Text(\n                                text \u003d \&quot;In Service\&quot;,\n                                style \u003d MaterialTheme.typography.bodyMedium,\n                                color \u003d Color(0xFF388E3C)\n                            )\n                        }\n                    }\n                }\n            }\n\n            item {\n                Button(\n                    onClick \u003d { showAddHydrantDialog \u003d true },\n                    modifier \u003d Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal \u003d 16.dp, vertical \u003d 8.dp)\n                        .height(56.dp),\n                    colors \u003d ButtonDefaults.buttonColors(\n                        containerColor \u003d if (hydrantAdded) Color(0xFF4CAF50) else Color(0xFF81C784)\n                    ),\n                    shape \u003d RoundedCornerShape(8.dp)\n                ) {\n                    Text(\n                        if (hydrantAdded) \&quot;Added ✓\&quot; else \&quot;Add Fire Hydrant\&quot;,\n                        style \u003d MaterialTheme.typography.titleMedium,\n                        fontWeight \u003d FontWeight.Medium\n                    )\n                }\n            }\n\n            item {\n                Row(\n                    modifier \u003d Modifier\n                        .fillMaxWidth()\n                        .padding(horizontal \u003d 16.dp, vertical \u003d 8.dp),\n                    horizontalArrangement \u003d Arrangement.spacedBy(8.dp)\n                ) {\n                    Button(\n                        onClick \u003d { },\n                        modifier \u003d Modifier\n                            .weight(1f)\n                            .height(56.dp),\n                        colors \u003d ButtonDefaults.buttonColors(\n                            containerColor \u003d Color(0xFFEF5350)\n                        ),\n                        shape \u003d RoundedCornerShape(8.dp)\n                    ) {\n                        Text(\n                            \&quot;Fire Hydrant List\&quot;,\n                            style \u003d MaterialTheme.typography.bodyMedium,\n                            fontWeight \u003d FontWeight.Medium\n                        )\n                    }\n\n                    Button(\n                        onClick \u003d { },\n                        modifier \u003d Modifier\n                            .weight(1f)\n                            .height(56.dp),\n                        colors \u003d ButtonDefaults.buttonColors(\n                            containerColor \u003d Color(0xFFEF5350)\n                        ),\n                        shape \u003d RoundedCornerShape(8.dp)\n                    ) {\n                        Text(\n                            \&quot;Fire Hydrant Map\&quot;,\n                            style \u003d MaterialTheme.typography.bodyMedium,\n                            fontWeight \u003d FontWeight.Medium\n                        )\n                    }\n                }\n            }\n        }\n    }\n}\n\n@Composable\nfun WeatherDetail(label: String, value: String) {\n    Column(\n        horizontalAlignment \u003d Alignment.CenterHorizontally\n    ) {\n        Text(\n            text \u003d label,\n            style \u003d MaterialTheme.typography.bodySmall,\n            color \u003d Color(0xFF999999)\n        )\n        Text(\n            text \u003d value,\n            style \u003d MaterialTheme.typography.bodyMedium,\n            fontWeight \u003d FontWeight.Medium\n        )\n    }\n}\n\n@OptIn(ExperimentalMaterial3Api::class)\n@Composable\nfun AddFireHydrantDialog(\n    onDismiss: () -\u003e Unit,\n    onConfirm: () -\u003e Unit\n) {\n    var hydrantName by remember { mutableStateOf(\&quot;\&quot;) }\n    var exactLocation by remember { mutableStateOf(\&quot;\&quot;) }\n    var latitude by remember { mutableStateOf(\&quot;\&quot;) }\n    var longitude by remember { mutableStateOf(\&quot;\&quot;) }\n    var typeColor by remember { mutableStateOf(\&quot;\&quot;) }\n    var serviceStatus by remember { mutableStateOf(\&quot;In Service\&quot;) }\n    var remarks by remember { mutableStateOf(\&quot;\&quot;) }\n    var expanded by remember { mutableStateOf(false) }\n\n    AlertDialog(\n        onDismissRequest \u003d onDismiss,\n        title \u003d {\n            Text(\n                \&quot;Add Fire Hydrant\&quot;,\n                style \u003d MaterialTheme.typography.headlineSmall,\n                fontWeight \u003d FontWeight.Bold\n            )\n        },\n        text \u003d {\n            LazyColumn(\n                modifier \u003d Modifier\n                    .fillMaxWidth()\n                    .heightIn(max \u003d 500.dp),\n                verticalArrangement \u003d Arrangement.spacedBy(16.dp)\n            ) {\n                item {\n                    Column {\n                        Text(\n                            \&quot;Hydrant Name\&quot;,\n                            style \u003d MaterialTheme.typography.bodyMedium,\n                            fontWeight \u003d FontWeight.Medium,\n                            modifier \u003d Modifier.padding(bottom \u003d 8.dp)\n                        )\n                        OutlinedTextField(\n                            value \u003d hydrantName,\n                            onValueChange \u003d { hydrantName \u003d it },\n                            modifier \u003d Modifier.fillMaxWidth(),\n                            placeholder \u003d { Text(\&quot;Enter hydrant name\&quot;) },\n                            singleLine \u003d true\n                        )\n                    }\n                }\n\n                item {\n                    Column {\n                        Text(\n                            \&quot;Exact Location\&quot;,\n                            style \u003d MaterialTheme.typography.bodyMedium,\n                            fontWeight \u003d FontWeight.Medium,\n                            modifier \u003d Modifier.padding(bottom \u003d 8.dp)\n                        )\n                        OutlinedTextField(\n                            value \u003d exactLocation,\n                            onValueChange \u003d { exactLocation \u003d it },\n                            modifier \u003d Modifier.fillMaxWidth(),\n                            placeholder \u003d { Text(\&quot;Enter exact location\&quot;) },\n                            singleLine \u003d true\n                        )\n                    }\n                }\n\n                item {\n                    Column {\n                        Text(\n                            \&quot;Coordinates\&quot;,\n                            style \u003d MaterialTheme.typography.bodyMedium,\n                            fontWeight \u003d FontWeight.Medium,\n                            modifier \u003d Modifier.padding(bottom \u003d 8.dp)\n                        )\n                        Row(\n                            modifier \u003d Modifier.fillMaxWidth(),\n                            horizontalArrangement \u003d Arrangement.spacedBy(8.dp)\n                        ) {\n                            OutlinedTextField(\n                                value \u003d latitude,\n                                onValueChange \u003d { latitude \u003d it },\n                                modifier \u003d Modifier.weight(1f),\n                                placeholder \u003d { Text(\&quot;Latitude\&quot;) },\n                                singleLine \u003d true,\n                                keyboardOptions \u003d KeyboardOptions(keyboardType \u003d KeyboardType.Decimal)\n                            )\n                            OutlinedTextField(\n                                value \u003d longitude,\n                                onValueChange \u003d { longitude \u003d it },\n                                modifier \u003d Modifier.weight(1f),\n                                placeholder \u003d { Text(\&quot;Longitude\&quot;) },\n                                singleLine \u003d true,\n                                keyboardOptions \u003d KeyboardOptions(keyboardType \u003d KeyboardType.Decimal)\n                            )\n                        }\n                    }\n                }\n\n                item {\n                    Column {\n                        Text(\n                            \&quot;Type/Color\&quot;,\n                            style \u003d MaterialTheme.typography.bodyMedium,\n                            fontWeight \u003d FontWeight.Medium,\n                            modifier \u003d Modifier.padding(bottom \u003d 8.dp)\n                        )\n                        OutlinedTextField(\n                            value \u003d typeColor,\n                            onValueChange \u003d { typeColor \u003d it },\n                            modifier \u003d Modifier.fillMaxWidth(),\n                            placeholder \u003d { Text(\&quot;Enter type/color\&quot;) },\n                            singleLine \u003d true\n                        )\n                    }\n                }\n\n                item {\n                    Column {\n                        Text(\n                            \&quot;Service Status\&quot;,\n                            style \u003d MaterialTheme.typography.bodyMedium,\n                            fontWeight \u003d FontWeight.Medium,\n                            modifier \u003d Modifier.padding(bottom \u003d 8.dp)\n                        )\n                        ExposedDropdownMenuBox(\n                            expanded \u003d expanded,\n                            onExpandedChange \u003d { expanded \u003d !expanded }\n                        ) {\n                            OutlinedTextField(\n                                value \u003d serviceStatus,\n                                onValueChange \u003d {},\n                                readOnly \u003d true,\n                                modifier \u003d Modifier\n                                    .fillMaxWidth()\n                                    .menuAnchor(),\n                                trailingIcon \u003d {\n                                    ExposedDropdownMenuDefaults.TrailingIcon(expanded \u003d expanded)\n                                }\n                            )\n                            ExposedDropdownMenu(\n                                expanded \u003d expanded,\n                                onDismissRequest \u003d { expanded \u003d false }\n                            ) {\n                                DropdownMenuItem(\n                                    text \u003d { Text(\&quot;In Service\&quot;) },\n                                    onClick \u003d {\n                                        serviceStatus \u003d \&quot;In Service\&quot;\n                                        expanded \u003d false\n                                    }\n                                )\n                                DropdownMenuItem(\n                                    text \u003d { Text(\&quot;Out of Service\&quot;) },\n                                    onClick \u003d {\n                                        serviceStatus \u003d \&quot;Out of Service\&quot;\n                                        expanded \u003d false\n                                    }\n                                )\n                            }\n                        }\n                    }\n                }\n\n                item {\n                    Column {\n                        Text(\n                            \&quot;Remarks\&quot;,\n                            style \u003d MaterialTheme.typography.bodyMedium,\n                            fontWeight \u003d FontWeight.Medium,\n                            modifier \u003d Modifier.padding(bottom \u003d 8.dp)\n                        )\n                        OutlinedTextField(\n                            value \u003d remarks,\n                            onValueChange \u003d { remarks \u003d it },\n                            modifier \u003d Modifier.fillMaxWidth(),\n                            placeholder \u003d { Text(\&quot;Enter remarks (optional)\&quot;) },\n                            minLines \u003d 3,\n                            maxLines \u003d 5\n                        )\n                    }\n                }\n            }\n        },\n        confirmButton \u003d {\n            Button(\n                onClick \u003d onConfirm,\n                colors \u003d ButtonDefaults.buttonColors(\n                    containerColor \u003d Color(0xFF81C784)\n                )\n            ) {\n                Text(\&quot;Add Fire Hydrant\&quot;)\n            }\n        },\n        dismissButton \u003d {\n            TextButton(onClick \u003d onDismiss) {\n                Text(\&quot;Cancel\&quot;)\n            }\n        }\n    )\n}\n\n@Composable\nfun MapScreen(modifier: Modifier \u003d Modifier) {\n    val context \u003d androidx.compose.ui.platform.LocalContext.current\n    val lagunaLake \u003d LatLng(14.3500, 121.2500)\n    val cameraPositionState \u003d rememberCameraPositionState {\n        position \u003d CameraPosition.fromLatLngZoom(lagunaLake, 10f)\n    }\n\n    var isMyLocationEnabled by remember { mutableStateOf(false) }\n    val scope \u003d rememberCoroutineScope()\n\n    val locationPermissionLauncher \u003d rememberLauncherForActivityResult(\n        contract \u003d ActivityResultContracts.RequestMultiplePermissions()\n    ) { permissions -\u003e\n        when {\n            permissions[android.Manifest.permission.ACCESS_FINE_LOCATION] \u003d\u003d true ||\n                    permissions[android.Manifest.permission.ACCESS_COARSE_LOCATION] \u003d\u003d true -\u003e {\n                isMyLocationEnabled \u003d true\n                getCurrentLocation(context) { location -\u003e\n                    scope.launch {\n                        cameraPositionState.animate(\n                            CameraUpdateFactory.newLatLngZoom(\n                                LatLng(location.latitude, location.longitude),\n                                15f\n                            )\n                        )\n                    }\n                }\n            }\n            else -\u003e {\n                android.widget.Toast.makeText(\n                    context,\n                    \&quot;Location permission denied\&quot;,\n                    android.widget.Toast.LENGTH_SHORT\n                ).show()\n            }\n        }\n    }\n\n    Box(modifier \u003d modifier.fillMaxSize()) {\n        GoogleMap(\n            modifier \u003d Modifier.fillMaxSize(),\n            cameraPositionState \u003d cameraPositionState,\n            properties \u003d MapProperties(\n                isMyLocationEnabled \u003d isMyLocationEnabled\n            ),\n            uiSettings \u003d MapUiSettings(\n                myLocationButtonEnabled \u003d false,\n                zoomControlsEnabled \u003d false\n            )\n        )\n\n        Column(\n            modifier \u003d Modifier\n                .align(Alignment.BottomEnd)\n                .padding(end \u003d 12.dp, bottom \u003d 16.dp),\n            horizontalAlignment \u003d Alignment.End,\n            verticalArrangement \u003d Arrangement.spacedBy(6.dp)\n        ) {\n            FloatingActionButton(\n                onClick \u003d {\n                    if (checkLocationPermission(context)) {\n                        isMyLocationEnabled \u003d true\n                        getCurrentLocation(context) { location -\u003e\n                            scope.launch {\n                                cameraPositionState.animate(\n                                    CameraUpdateFactory.newLatLngZoom(\n                                        LatLng(location.latitude, location.longitude),\n                                        15f\n                                    )\n                                )\n                            }\n                        }\n                    } else {\n                        locationPermissionLauncher.launch(\n                            arrayOf(\n                                android.Manifest.permission.ACCESS_FINE_LOCATION,\n                                android.Manifest.permission.ACCESS_COARSE_LOCATION\n                            )\n                        )\n                    }\n                },\n                modifier \u003d Modifier.size(36.dp),\n                containerColor \u003d Color.White,\n                contentColor \u003d Color(0xFF5F6368),\n                elevation \u003d FloatingActionButtonDefaults.elevation(\n                    defaultElevation \u003d 3.dp,\n                    pressedElevation \u003d 5.dp\n                ),\n                shape \u003d MaterialTheme.shapes.small\n            ) {\n                Icon(\n                    imageVector \u003d Icons.Default.LocationOn,\n                    contentDescription \u003d \&quot;My Location\&quot;,\n                    modifier \u003d Modifier.size(18.dp),\n                    tint \u003d Color(0xFF5F6368)\n                )\n            }\n\n            FloatingActionButton(\n                onClick \u003d {\n                    scope.launch {\n                        val currentZoom \u003d cameraPositionState.position.zoom\n                        cameraPositionState.animate(\n                            CameraUpdateFactory.zoomTo(currentZoom + 1f)\n                        )\n                    }\n                },\n                modifier \u003d Modifier.size(36.dp),\n                containerColor \u003d Color.White,\n                contentColor \u003d Color(0xFF5F6368),\n                elevation \u003d FloatingActionButtonDefaults.elevation(\n                    defaultElevation \u003d 3.dp,\n                    pressedElevation \u003d 5.dp\n                ),\n                shape \u003d MaterialTheme.shapes.small\n            ) {\n                Text(\n                    text \u003d \&quot;+\&quot;,\n                    style \u003d MaterialTheme.typography.titleLarge,\n                    color \u003d Color(0xFF5F6368)\n                )\n            }\n\n            FloatingActionButton(\n                onClick \u003d {\n                    scope.launch {\n                        val currentZoom \u003d cameraPositionState.position.zoom\n                        cameraPositionState.animate(\n                            CameraUpdateFactory.zoomTo(currentZoom - 1f)\n                        )\n                    }\n                },\n                modifier \u003d Modifier.size(36.dp),\n                containerColor \u003d Color.White,\n                contentColor \u003d Color(0xFF5F6368),\n                elevation \u003d FloatingActionButtonDefaults.elevation(\n                    defaultElevation \u003d 3.dp,\n                    pressedElevation \u003d 5.dp\n                ),\n                shape \u003d MaterialTheme.shapes.small\n            ) {\n                Text(\n                    text \u003d \&quot;−\&quot;,\n                    style \u003d MaterialTheme.typography.titleLarge,\n                    color \u003d Color(0xFF5F6368)\n                )\n            }\n        }\n    }\n}\n\nfun checkLocationPermission(context: android.content.Context): Boolean {\n    return androidx.core.content.ContextCompat.checkSelfPermission(\n        context,\n        android.Manifest.permission.ACCESS_FINE_LOCATION\n    ) \u003d\u003d android.content.pm.PackageManager.PERMISSION_GRANTED ||\n            androidx.core.content.ContextCompat.checkSelfPermission(\n                context,\n                android.Manifest.permission.ACCESS_COARSE_LOCATION\n            ) \u003d\u003d android.content.pm.PackageManager.PERMISSION_GRANTED\n}\n\n@SuppressLint(\&quot;MissingPermission\&quot;)\nfun getCurrentLocation(\n    context: android.content.Context,\n    onLocationReceived: (android.location.Location) -\u003e Unit\n) {\n    val fusedLocationClient \u003d LocationServices.getFusedLocationProviderClient(context)\n\n    fusedLocationClient.lastLocation.addOnSuccessListener { location -\u003e\n        location?.let {\n            onLocationReceived(it)\n        } ?: run {\n            android.widget.Toast.makeText(\n                context,\n                \&quot;Unable to get current location\&quot;,\n                android.widget.Toast.LENGTH_SHORT\n            ).show()\n        }\n    }\n}\n\n@Composable\nfun FavoritesScreen(\n    modifier: Modifier \u003d Modifier,\n    scrollState: androidx.compose.foundation.lazy.LazyListState \u003d androidx.compose.foundation.lazy.rememberLazyListState(),\n    onMunicipalityClick: (String) -\u003e Unit\n) {\n    val municipalities \u003d listOf(\n        \&quot;Alaminos\&quot;, \&quot;Bay\&quot;, \&quot;Biñan\&quot;, \&quot;Cabuyao\&quot;, \&quot;Calamba\&quot;, \&quot;Calauan\&quot;,\n        \&quot;Cavinti\&quot;, \&quot;Famy\&quot;, \&quot;Kalayaan\&quot;, \&quot;Liliw\&quot;, \&quot;Los Baños\&quot;, \&quot;Luisiana\&quot;,\n        \&quot;Lumban\&quot;, \&quot;Mabitac\&quot;, \&quot;Magdalena\&quot;, \&quot;Majayjay\&quot;, \&quot;Nagcarlan\&quot;, \&quot;Paete\&quot;,\n        \&quot;Pagsanjan\&quot;, \&quot;Pakil\&quot;, \&quot;Pangil\&quot;, \&quot;Rizal\&quot;, \&quot;San Pablo\&quot;, \&quot;San Pedro\&quot;,\n        \&quot;Santa Cruz\&quot;, \&quot;Santa Maria\&quot;, \&quot;Santa Rosa\&quot;, \&quot;Siniloan\&quot;, \&quot;Victoria\&quot;\n    )\n\n    Column(\n        modifier \u003d modifier\n            .fillMaxSize()\n            .background(Color(0xFFF5F5F5))\n    ) {\n        Box(\n            modifier \u003d Modifier\n                .fillMaxWidth()\n                .background(Color(0xFFFF6B35))\n                .systemBarsPadding()\n                .padding(16.dp)\n        ) {\n            Text(\n                text \u003d \&quot;Laguna Municipalities\&quot;,\n                style \u003d MaterialTheme.typography.headlineSmall,\n                color \u003d Color.White,\n                fontWeight \u003d FontWeight.Bold\n            )\n        }\n\n        LazyColumn(\n            modifier \u003d Modifier.fillMaxSize(),\n            state \u003d scrollState,\n            contentPadding \u003d PaddingValues(16.dp),\n            verticalArrangement \u003d Arrangement.spacedBy(8.dp)\n        ) {\n            items(municipalities) { municipality -\u003e\n                MunicipalityButton(\n                    name \u003d municipality,\n                    onClick \u003d { onMunicipalityClick(municipality) }\n                )\n            }\n        }\n    }\n}\n\n@Composable\nfun MunicipalityButton(name: String, onClick: () -\u003e Unit) {\n    Surface(\n        onClick \u003d onClick,\n        modifier \u003d Modifier.fillMaxWidth(),\n        color \u003d Color.White,\n        shape \u003d MaterialTheme.shapes.medium,\n        shadowElevation \u003d 2.dp\n    ) {\n        Row(\n            modifier \u003d Modifier\n                .fillMaxWidth()\n                .padding(16.dp),\n            horizontalArrangement \u003d Arrangement.SpaceBetween,\n            verticalAlignment \u003d Alignment.CenterVertically\n        ) {\n            Text(\n                text \u003d name,\n                style \u003d MaterialTheme.typography.bodyLarge,\n                color \u003d Color(0xFF212121),\n                fontWeight \u003d FontWeight.Medium\n            )\n            Icon(\n                imageVector \u003d Icons.Default.KeyboardArrowRight,\n                contentDescription \u003d \&quot;View $name\&quot;,\n                tint \u003d Color(0xFFFF6B35)\n            )\n        }\n    }\n}\n\n@Composable\nfun ProfileScreen(modifier: Modifier \u003d Modifier, userName: String, onLogout: () -\u003e Unit) {\n    val viewModel: AuthViewModel \u003d viewModel()\n\n    val initials \u003d userName.split(\&quot; \&quot;)\n        .mapNotNull { it.firstOrNull()?.toString() }\n        .take(2)\n        .joinToString(\&quot;\&quot;)\n        .uppercase()\n\n    Column(\n        modifier \u003d modifier\n            .fillMaxSize()\n            .background(Color(0xFFF5F5F5))\n    ) {\n        Box(\n            modifier \u003d Modifier\n                .fillMaxWidth()\n                .background(Color(0xFFFF6B35))\n        ) {\n            Row(\n                modifier \u003d Modifier\n                    .fillMaxWidth()\n                    .padding(24.dp)\n                    .systemBarsPadding(),\n                verticalAlignment \u003d Alignment.CenterVertically,\n                horizontalArrangement \u003d Arrangement.Start\n            ) {\n                Box(\n                    modifier \u003d Modifier\n                        .size(64.dp)\n                        .clip(CircleShape)\n                        .background(Color.White),\n                    contentAlignment \u003d Alignment.Center\n                ) {\n                    Text(\n                        text \u003d initials,\n                        style \u003d MaterialTheme.typography.headlineSmall,\n                        color \u003d Color(0xFFFF6B35),\n                        fontWeight \u003d FontWeight.Bold\n                    )\n                }\n\n                Spacer(modifier \u003d Modifier.width(16.dp))\n\n                Column {\n                    Text(\n                        text \u003d userName,\n                        style \u003d MaterialTheme.typography.headlineSmall,\n                        color \u003d Color.White,\n                        fontWeight \u003d FontWeight.Bold\n                    )\n\n                    Spacer(modifier \u003d Modifier.height(8.dp))\n\n                    Button(\n                        onClick \u003d { },\n                        modifier \u003d Modifier\n                            .wrapContentWidth()\n                            .height(32.dp),\n                        colors \u003d ButtonDefaults.buttonColors(\n                            containerColor \u003d Color.White,\n                            contentColor \u003d Color.Black\n                        ),\n                        shape \u003d MaterialTheme.shapes.small,\n                        contentPadding \u003d PaddingValues(horizontal \u003d 16.dp, vertical \u003d 6.dp)\n                    ) {\n                        Text(\n                            \&quot;Apply as Admin\&quot;,\n                            style \u003d MaterialTheme.typography.bodySmall,\n                            fontWeight \u003d FontWeight.Medium\n                        )\n                    }\n                }\n            }\n        }\n\n        Spacer(modifier \u003d Modifier.height(16.dp))\n\n        Surface(\n            modifier \u003d Modifier\n                .fillMaxWidth()\n                .padding(horizontal \u003d 16.dp),\n            color \u003d Color.White,\n            shape \u003d MaterialTheme.shapes.medium,\n            shadowElevation \u003d 1.dp\n        ) {\n            Column {\n                ProfileMenuItem(\n                    title \u003d \&quot;Settings\&quot;,\n                    onClick \u003d { }\n                )\n\n                HorizontalDivider(\n                    modifier \u003d Modifier.padding(horizontal \u003d 16.dp),\n                    color \u003d Color(0xFFE0E0E0)\n                )\n\n                ProfileMenuItem(\n                    title \u003d \&quot;Logout\&quot;,\n                    onClick \u003d {\n                        viewModel.signOut()\n                        onLogout()\n                    },\n                    isLogout \u003d true\n                )\n            }\n        }\n\n        Spacer(modifier \u003d Modifier.weight(1f))\n    }\n}\n\n@Composable\nfun ProfileMenuItem(title: String, onClick: () -\u003e Unit, isLogout: Boolean \u003d false) {\n    Surface(\n        onClick \u003d onClick,\n        modifier \u003d Modifier.fillMaxWidth(),\n        color \u003d Color.Transparent\n    ) {\n        Row(\n            modifier \u003d Modifier\n                .fillMaxWidth()\n                .padding(horizontal \u003d 16.dp, vertical \u003d 16.dp),\n            horizontalArrangement \u003d Arrangement.SpaceBetween,\n            verticalAlignment \u003d Alignment.CenterVertically\n        ) {\n            Text(\n                text \u003d title,\n                style \u003d MaterialTheme.typography.bodyLarge,\n                color \u003d if (isLogout) MaterialTheme.colorScheme.error else Color(0xFF212121)\n            )\n            Icon(\n                imageVector \u003d Icons.Default.KeyboardArrowRight,\n                contentDescription \u003d \&quot;Navigate\&quot;,\n                tint \u003d if (isLogout) MaterialTheme.colorScheme.error else Color(0xFF757575)\n            )\n        }\n    }\n}\n\nenum class AppDestinations(\n    val label: String,\n    val icon: ImageVector\n) {\n    HOME(\&quot;Home\&quot;, Icons.Default.Home),\n    FAVORITES(\&quot;Favorites\&quot;, Icons.Default.Favorite),\n    PROFILE(\&quot;Profile\&quot;, Icons.Default.AccountBox)\n}\n\n@Preview(showBackground \u003d true)\n@Composable\nfun LoginScreenPreview() {\n    HYDRANTTheme {\n        LoginScreen(onLoginSuccess \u003d {}, onNavigateToSignUp \u003d {})\n    }\n}\n```\n\u003c/current_file\u003e\n\u003c/additional_data\u003e\n\u003cuser_query\u003e\nHey\n\u003c/user_query\u003e&quot;}]},{&quot;role&quot;:&quot;assistant&quot;,&quot;content&quot;:[]}]},&quot;73f3514c-4c65-486e-ab3c-9a340f19ebe8&quot;:{&quot;id&quot;:&quot;73f3514c-4c65-486e-ab3c-9a340f19ebe8&quot;,&quot;name&quot;:&quot;Organizing Hydrant IDs by Municipality in Android (Kotlin)&quot;,&quot;timestamp&quot;:1766481060363,&quot;messages&quot;:[{&quot;role&quot;:&quot;user&quot;,&quot;content&quot;:[{&quot;type&quot;:&quot;text&quot;,&quot;text&quot;:&quot;\u003cuser_query\u003e\nI need this on my add fire hydrant button also I need to organize in every municipalities like Alaminos Hydrant_Id1 Alaminos Hydrant_Id2 Alaminos Bay Hydrant_Id1 Bay Hydrant_Id2 Bay fire_hydrants/ ├── Alaminos/ │ ├── hydrant_id_1/ │ └── hydrant_id_2/ ├── Bay/ │ ├── hydrant_id_1/ │ └── hydrant_id_2/ └── ... (other municipalities) This is my code in mainactivity.kt\n\u003c/user_query\u003e&quot;}]},{&quot;role&quot;:&quot;assistant&quot;,&quot;content&quot;:[]}]}}" />
  </component>
</project>